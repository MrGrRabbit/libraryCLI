<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: models/book.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: models/book.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module Book
 * @description Класс книги.&lt;/br>
 * модуль включает методы управления книгами. &lt;/br>
 */

const MongoClient = require("mongoDB").MongoClient;

const mongoClient = new MongoClient("mongodb://127.0.0.1:27017/library");
/**
 * @class Book
 * @description Класс Book - книги
 */

class Book {

  constructor(nameBook) {
    this.nameBook = nameBook;
  }

  /**
   * @function
   * @name mongoDB_Client
   * @returns 1
   * Тестирует подключение к базе данных.&lt;/br>
   */
  mongoDB_Client() { mongoClient.connect(function(err, client) {
          // создание - подключение (обращение) к базе данных libraryDB
          const db = client.db("libraryDB");
      
          // метод command, проверяет подключение к базе данных (наприер: объектом ping);
          db.command({ping: 1}, function(err, result){
          
              if (!err) {
                console.log("Подключение с сервером успешно установлено");
                console.log(result);
                client.close();
                                  
              }
              else {
                  return console.log('Ошибка подключения к базе данных' + err);
              }
              //return result;
          });
      });
      return 1;
  }

  // метод поиск книги
  /**
   * @function
   * @name findBooks
   * @description метод выполняет поиск книги в библиотеке по названию &lt;/br>
   */
  findBooks () {mongoClient.connect(function(err, client) {

      // создание - подключение (обращение) к базе данных libraryDB
      const db = client.db("libraryDB");
  
      // создание - подключение к коллеции books
      const books = db.collection("books");
  
      // получение книг
      books.find().toArray(function (err, results) {
        console.log(results)
        client.close();
        console.log('Подклчючение закрыто!');
      });
    });
  }

  // добавление книги
  /**
   * @function
   * @name addBook
   * @param {string} answer 
   * @description Метод осуществляет добавление книги. &lt;/br>
   * Вызывается ряд вопросов, в которые передаются параметры книги.&lt;/br>
   * Параметры передается в метод, который формирует запрос в базу данных. &lt;/br>
   */
  addBook (answer) { mongoClient.connect((err, client) => {

          // создание - подключение (обращение) к базе данных libraryDB
          const db = client.db("libraryDB");
      
          // создание - подключение к коллеции books
          const books = db.collection("books");
      
          books.insertOne(answer, (err, results) => {
            if (err) {
              console.log('Произошла ошибка при добавлении: ' + err);
            }
            console.log('Книга добавлена в library' + results);
            console.log(answer);
            client.close();
            console.log('Подклчючение закрыто!');
          });
      });
  }

  // удаление книги
  /**
   * @function
   * @name deleteBook
   * @param {string} name 
   * @description Метод осуществляет удаление книги &lt;/br>
   */
  deleteBook (name) {mongoClient.connect((err, client) => {
      
      // создание - подключение (обращение) к базе данных libraryDB
      const db = client.db("libraryDB");
  
      // создание - подключение к коллеции books
      const books = db.collection("books");
      
      books.deleteOne(name, (err, results) => {
        
        if (err) return console.log(err);
        
        console.log('Книга ' + name.nameBook + ' удалена');
        console.log(results);
        client.close();
        console.log('Подклчючение закрыто!');

      });
    });
  }
}

module.exports = {
    Book,
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="index.module_test.html">test</a></li><li><a href="module-Book.html">Book</a></li><li><a href="module-index.html">index</a></li><li><a href="module-Readers.html">Readers</a></li></ul><h3>Classes</h3><ul><li><a href="module-Book-Book.html">Book</a></li><li><a href="module-Readers-Readers.html">Readers</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Fri Jun 03 2022 15:16:21 GMT+0500 (Екатеринбург, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
